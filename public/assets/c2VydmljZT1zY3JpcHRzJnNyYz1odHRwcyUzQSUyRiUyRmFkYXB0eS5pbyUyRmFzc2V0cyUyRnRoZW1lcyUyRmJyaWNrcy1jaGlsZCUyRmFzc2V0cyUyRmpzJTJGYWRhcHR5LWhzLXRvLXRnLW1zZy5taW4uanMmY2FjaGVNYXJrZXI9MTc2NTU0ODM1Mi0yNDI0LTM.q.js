function adaptySendToTelegram(message){return fetch("/assets/themes/bricks-child/inc/modules/telegram/hs-to-tg.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:message})}).then(function(r){return r.json();}).then(function(data){if(!data.ok)throw new Error(data.error||"Unknown error");return data;}).catch(function(err){console.error("Error sending message to server:",err);});}function adaptyCreateTelegramTitle(){var messageTitle="HUBSPOT FORM";var pageTitle=document.title.replace(" â€” Adapty","").replace(" | Adapty","");var pageURL=window.location.protocol+"//"+window.location.host+window.location.pathname;return"<tg-emoji emoji-id=\"9193506339849722880\">ðŸ†•</tg-emoji> <b>"+messageTitle+"</b>\n"+"from <b><i><a href=\""+pageURL+"\">"+pageTitle+"</a></i></b>\n";}function adaptyTelegramFormatMessage(formData,additionalData){if(additionalData===void 0){additionalData={};}var message=adaptyCreateTelegramTitle();message+="\n<b>FORM DATA</b>:\n";for(var key in formData){if(!formData.hasOwnProperty(key))continue;if(key==="hs_context")continue;message+=key+": <code>"+formData[key]+"</code>\n";}if(Object.keys(additionalData).length>0){message+="\n<b>ADDITIONAL INFO</b>:\n";for(var addKey in additionalData){if(!additionalData.hasOwnProperty(addKey))continue;message+=addKey+": <code>"+additionalData[addKey]+"</code>\n";}}return message+adaptyTelegramHubspotHashtag();}function adaptyTelegramHubspotHashtag(){var now=new Date();var year=now.getFullYear();var month=String(now.getMonth()+1).padStart(2,"0");var day=String(now.getDate()).padStart(2,"0");return"\n#date_"+year+month+day+" #hs #hubspot";}function handleHubSpotFormSubmission(event){if(event.data.type!=="hsFormCallback")return;if(event.data.eventName==="onFormSubmitted"){var formData=event.data.data.submissionValues;var now=new Date();var additionalData={"Page Title":document.title.replace(" â€” Adapty","").replace(" | Adapty",""),"Page URL":window.location.href,"Date Time":now.toLocaleDateString()+", "+now.toLocaleTimeString()};var message=adaptyTelegramFormatMessage(formData,additionalData);adaptySendToTelegram(message);}}window.addEventListener("message",handleHubSpotFormSubmission);